model Property {
  id   Int    @id @default(autoincrement())
  slug String @unique

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  ownerName  String
  ownerPhone String @db.VarChar(20)

  propertyTypeId Int          @unique
  propertyType   PropertyType @relation(fields: [propertyTypeId], references: [id])

  title       String
  description String
  price       Decimal @db.Decimal(12, 2)

  governorate Governorate
  city        String

  area Int

  media Media[]

  amenities Amenity[]

  purpose     PropertyPurpose
  // only one of these will be present depending on the purpose
  rentDetails RentDetails?
  sellDetails SellDetails?

  @@index([userId])
  @@index([slug])
  @@map("property")
}

model RentDetails {
  id Int @id @default(autoincrement())

  propertyId Int      @unique
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  rentFrequency RentFrequency
  deposit       Decimal       @db.Decimal(12, 2)
  insurance     Decimal       @db.Decimal(12, 2)

  @@index([propertyId])
  @@map("rent_details")
}

model SellDetails {
  id Int @id @default(autoincrement())

  propertyId Int      @unique
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  paymentMethod PaymentMethod
  // if payment method is INSTALLMENT, then down payment is required
  downPayment   Decimal?      @db.Decimal(12, 2)

  @@index([propertyId])
  @@map("sell_details")
}

enum PropertyPurpose {
  SELL
  RENT
}

enum PaymentMethod {
  CASH
  INSTALLMENT
  BOTH
}

enum RentFrequency {
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
}

enum Amenity {
  BALCONY
  BUILT_IN_KITCHEN_APPLIANCES
  PRIVATE_GARDEN
  CENTRAL_AC
  SECURITY
  COVERED_PARKING
  MAIDS_ROOM
  PETS_ALLOWED
  POOL
  ELECTRICITY_METER
  WATER_METER
  NATURAL_GAS
  LANDLINE
  ELEVATOR
  AIR_CONDITIONING
  STORAGE
}

enum Governorate {
  Alexandria
  Aswan
  Asyut
  Beheira
  Beni_Suef
  Cairo
  Dakahlia
  Damietta
  Faiyum
  Gharbia
  Giza
  Ismailia
  Kafr_El_Sheikh
  Luxor
  Matrouh
  Minya
  Monufia
  New_Valley
  North_Sinai
  Port_Said
  Qalyubia
  Qena
  Red_Sea
  Sharqia
  Sohag
  South_Sinai
  Suez
}
